project_overview:
  name: "Yama"
  description: "AI-powered pull request analysis tool for automated code review and description enhancement"
  version: "1.0.0"
  repository: "https://github.com/juspay/yama"

goals:
  primary:
    - "Automate code review process with AI-powered security and quality analysis"
    - "Enhance PR descriptions automatically with required sections"
    - "Provide unified context gathering for efficient PR processing"
  secondary:
    - "Reduce manual review effort by 80%"
    - "Ensure consistent code quality standards"
    - "Improve PR documentation quality"

scope:
  included:
    - "Bitbucket integration (primary)"
    - "AI-powered code review with violation detection"
    - "PR description enhancement with preservation"
    - "Unified context gathering and caching"
    - "Configurable diff strategies"
    - "CLI interface for automation"
  future:
    - "GitHub and GitLab support"
    - "Security vulnerability scanning"
    - "Analytics and reporting"
    - "Web UI dashboard"
    - "Webhook-based automation"

constraints:
  technical:
    - "Must work with Bitbucket Server API"
    - "Requires NeuroLink for AI integration"
    - "Node.js 18+ runtime"
    - "TypeScript for type safety"
  operational:
    - "API rate limits consideration"
    - "Large PR handling (100+ files)"
    - "AI token limits management"

key_features:
  - name: "Smart Diff Strategy"
    description: "Automatically chooses between whole diff or file-by-file based on PR size"
    configurable: true
  - name: "Context Caching"
    description: "Intelligent caching to reduce API calls by 90%"
  - name: "Inline Code Comments"
    description: "Posts review comments directly on code lines"
  - name: "Description Preservation"
    description: "Never loses existing content when enhancing descriptions"
  - name: "Provider-Aware Token Management"
    description: "Intelligent AI token limit management preventing API failures"
    configurable: true
  - name: "Memory Bank Integration"
    description: "Persistent project context and pattern learning across sessions"
    configurable: true
  - name: "Multi-Instance Processing"
    description: "Consensus-based analysis using multiple AI instances with different configurations"
    configurable: true
    benefits:
      - "Improved accuracy through diverse AI model perspectives"
      - "Reduced false positives via consensus analysis"
      - "Fault tolerance through instance redundancy"
  - name: "Advanced Deduplication System"
    description: "Multi-level deduplication eliminating redundant violations and comments"
    configurable: true
    levels:
      - "Exact hash-based duplicate removal"
      - "Normalized content duplicate removal"
      - "Same file+line duplicate resolution"
      - "AI-powered semantic similarity analysis"
  - name: "Parallel Processing Infrastructure"
    description: "Sophisticated concurrency control and resource management for optimal performance"
    configurable: true
    features:
      - "Semaphore-based concurrency control"
      - "Token budget management and allocation"
      - "Optimal concurrency calculation"
      - "Comprehensive resource monitoring"
